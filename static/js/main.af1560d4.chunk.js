(this["webpackJsonpdisc-flyte"]=this["webpackJsonpdisc-flyte"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),c=n(32),i=n.n(c),l=(n(39),n(12)),s=n(11),o=(n(40),n(26)),u=n.n(o),d=(n(53),n(6));function h(e){var t=u()();return Object(d.jsxs)("div",{className:"inline-number-input",children:[Object(d.jsx)("label",{htmlFor:t,children:e.label}),Object(d.jsx)("input",{id:t,name:e.name,type:"number",value:e.value,onChange:function(t){return e.onChange(t)}})]})}n(55);function p(e){var t=u()();return Object(d.jsxs)("div",{className:"select-input",children:[Object(d.jsx)("label",{htmlFor:t,children:e.label}),Object(d.jsx)("select",{id:t,name:e.name,value:e.value,onChange:function(t){return e.onChange(t)},children:e.children})]})}var j=n(0),b=n(1),f=n(5);function m(e,t,n){if(Array.isArray(e))return e.map((function(e){return m(e,t,n)}));if(e<t[0])return n[0];for(var r=0,a=1;r<t.length-1;r++,a++)if(t[r+1]>e)return(n[r]*(t[a]-e)+n[a]*(e-t[r]))/(t[a]-t[r]);return n[n.length-1]}function v(e,t,n){return new f.Vector3(e,t,n)}var x=function(){function e(t){Object(j.a)(this,e),this.name=t,this.aoarange=[0],this.cl=[0],this.cd=[0],this.cm=[0],this.jxy=0,this.jz=0,this.diam=0}return Object(b.a)(e,[{key:"getCl",value:function(e){return m(e,this.aoarange,this.cl)}},{key:"getCd",value:function(e){return m(e,this.aoarange,this.cd)}},{key:"getCm",value:function(e){return m(e,this.aoarange,this.cm)}}]),e}(),y=new x("Aviar");y.aoarange=[-1.570796327,-.5235987756,-.0872664626,-.06981317008,-.05235987756,-.03490658504,-.01745329252,0,.01745329252,.03490658504,.05235987756,.06981317008,.0872664626,.1047197551,.1221730476,.1396263402,.1570796327,.1745329252,.1919862177,.2094395102,.2268928028,.2443460953,.2617993878,.7853981634,.872664626,1.570796327],y.cl=[0,-1,-.088,-.049,-.009,.034,.093,.154,.21,.256,.304,.343,.383,.426,.468,.508,.549,.591,.631,.672,.702,.74,.78,1.6,.8,0],y.cd=[.4,.188,.076,.071,.07,.072,.072,.084,.088,.085,.102,.117,.133,.141,.157,.174,.189,.203,.216,.226,.245,.266,.281,.7,.5,.6],y.cm=[0,-.08,-.015,-.016,-.011,-.01,-.013,-.018,-.018,-.017,-.014,-.014,-.011,-.008,-.005,0,.005,.009,.011,.02,.024,.032,.039,.23,.02,0],y.jxy=.00423,y.jz=.00846,y.diam=.21;var g=new x("Wraith");g.aoarange=[-1.570796327,-.5235987756,-.0872664626,-.06981317008,-.05235987756,-.03490658504,-.01745329252,0,.01745329252,.03490658504,.05235987756,.06981317008,.0872664626,.1047197551,.1221730476,.1396263402,.1570796327,.1745329252,.1919862177,.2094395102,.2268928028,.2443460953,.2617993878,.7853981634,.872664626,1.570796327],g.cl=[0,-1,-.088,-.049,-.009,.034,.093,.154,.21,.256,.304,.343,.383,.426,.468,.508,.549,.591,.631,.672,.702,.74,.78,1.6,.8,0],g.cd=[.4,.188,.076,.071,.07,.072,.072,.084,.088,.085,.102,.117,.133,.141,.157,.174,.189,.203,.216,.226,.245,.266,.281,.7,.5,.6],g.cm=[0,-.08,-.015,-.016,-.011,-.01,-.013,-.018,-.018,-.017,-.014,-.014,-.011,-.008,-.005,0,.005,.009,.011,.02,.024,.032,.039,.23,.02,0],g.jxy=.00423,g.jz=.00846,g.diam=.21;var O=[y,g];n(57);function w(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1],i=function(t){var n=t.target.name,r=e.throw;r[n]=t.target.value,e.onThrowChange(r)},l=e.throw;return Object(d.jsxs)("div",{className:"throw-input",children:[Object(d.jsx)("header",{onClick:function(){return c(!a)},children:Object(d.jsx)("span",{className:"heading",children:O[l.disc].name})}),a&&Object(d.jsxs)("div",{className:"inputs",children:[Object(d.jsx)(p,{label:"Disc",name:"disc",value:l.disc,onChange:i,children:O.map((function(e,t){return Object(d.jsx)("option",{value:t,children:e.name},e.name)}))}),Object(d.jsx)(h,{label:"Mass (g)",name:"mass",value:l.mass,onChange:i}),Object(d.jsx)(h,{label:"Speed (mph)",name:"speed",value:l.speed,onChange:i}),Object(d.jsx)(h,{label:"Spin (rev/s)",name:"spin",value:l.spin,onChange:i}),Object(d.jsxs)(p,{label:"Dir.",name:"direction",value:l.direction,onChange:i,children:[Object(d.jsx)("option",{value:"1",children:"Clockwise (RHBH/LHFH)"}),Object(d.jsx)("option",{value:"-1",children:"Anti-Clockwise (LHBH/RHFH)"})]}),Object(d.jsx)(h,{label:"Launch Angle (deg)",name:"launchAngle",value:l.launchAngle,onChange:i}),Object(d.jsx)(h,{label:"Nose Angle (deg)",name:"noseAngle",value:l.noseAngle,onChange:i}),Object(d.jsx)(h,{label:"Roll Angle (deg)",name:"rollAngle",value:l.rollAngle,onChange:i})]})]})}var M=n(14),A=n(9),C=n(13),k=a.a.forwardRef((function(e,t){var n=e.radius,r=e.aspect,a=Object(C.a)(e,["radius","aspect"]);return Object(d.jsxs)("mesh",Object(A.a)(Object(A.a)({ref:t,scale:[n,n*r,n]},a),{},{children:[Object(d.jsx)("sphereGeometry",{}),Object(d.jsx)("meshStandardMaterial",{color:"#ffa500"})]}))})),S=n(67);function F(e){var t=e.radius,n=e.points,a=e.eulers,c=a.map((function(e){return(e.z+Math.PI/2)/Math.PI})),i=a.map((function(e,r){return v(-t,0,0).applyEuler(e).add(n[r])})),l=a.map((function(e,r){return v(t,0,0).applyEuler(e).add(n[r])})),s=a.map((function(e){return v(0,-1,0).applyEuler(e)})),o=Object(r.useMemo)((function(){for(var e,t=[],n=[],r=[],a=0;a<i.length;a++){var o=new f.Color(Object(S.a)((e=c[a],1/(1+Math.exp(30*(e-.5)))))).toArray();t.push(i[a].toArray()),n.push(s[a].toArray()),r.push(o),t.push(l[a].toArray()),n.push(s[a].toArray()),r.push(o)}for(var u=[],d=0;d<i.length-1;d++)u.push(2*d,2*d+1,2*d+2),u.push(2*d+1,2*d+3,2*d+2);var h=new f.BufferGeometry;return h.setIndex(u),h.setAttribute("position",new f.Float32BufferAttribute(t.flat(),3)),h.setAttribute("normal",new f.Float32BufferAttribute(n.flat(),3)),h.setAttribute("color",new f.Float32BufferAttribute(r.flat(),3)),h}),[i,l,s,c]);return Object(d.jsxs)("mesh",{children:[Object(d.jsx)("primitive",{object:o,attach:"geometry"}),Object(d.jsx)("meshBasicMaterial",{toneMapped:!1,vertexColors:!0,side:f.DoubleSide})]})}var z=n(29),E=n(68),L=a.a.forwardRef((function(e,t){var n=e.disc,a=e.follow,c=e.full,i=e.thrower,l=e.landing,s=e.scrubber,o=e.centre,u=e.points,h=e.eulers,p=Object(C.a)(e,["disc","follow","full","thrower","landing","scrubber","centre","points","eulers"]),j=Object(r.useRef)(),b=new f.Vector3(0,1.8,-5),m=s.current.value,v=new f.Vector3,x=u[m].clone(),y=(new f.Box3).setFromPoints(u),g=b.clone(),O=!0,w=function(){O=!0,a.current.checked=!1,x.copy(o),g.set(y.max.x+5,y.max.y,y.min.z-5)},k=function(){O=!0,a.current.checked=!1,x.copy(u[0]),g.set(0,1.8,-5)},S=function(){O=!0,a.current.checked=!1;var e=u[u.length-1];x.copy(e),g.copy(y.max).add(new f.Vector3(5,0,5))};return Object(r.useEffect)((function(){var e=c.current;return e.addEventListener("click",w),function(){return e.removeEventListener("click",w)}})),Object(r.useEffect)((function(){var e=i.current;return e.addEventListener("click",k),function(){return e.removeEventListener("click",k)}})),Object(r.useEffect)((function(){var e=l.current;return e.addEventListener("click",S),function(){return e.removeEventListener("click",S)}})),Object(M.b)((function(){var e=s.current.value;e!==m&&(!function(e,t,n){e.copy(n).sub(t)}(v,n.current.position,u[e]),n.current.position.copy(u[e]),n.current.rotation.copy(h[e]),a.current.checked&&(O=!0,g.add(v),x.copy(u[e]))),O&&(j.current.target.lerp(x,.1),j.current.object.position.lerp(g,.1)),m=e})),Object(d.jsx)(E.a,Object(A.a)({ref:Object(z.a)([j,t]),onStart:function(){return O=!1},onEnd:function(){return g.copy(j.current.object.position)}},p))}));n(60);function N(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),a=Object(r.useRef)(),c=Object(r.useRef)(),i=Object(r.useRef)(),l=Object(r.useRef)(),s=Object(r.useRef)(),o=e.result.pos_g.map((function(e){return v(e.y,e.z,e.x)})),u=e.result.ori_g.map((function(e){return new f.Euler(-e.y,e.z,-e.x,"ZXY")})),h=Math.max.apply(Math,o.map((function(e){return e.z}))),p=o.length,j=h+10,b=v(0,0,h/2);return Object(d.jsxs)("div",{className:"ui",children:[Object(d.jsxs)("div",{className:"settings-camera",children:[Object(d.jsx)("input",{ref:a,id:"follow",type:"checkbox",defaultChecked:!0}),Object(d.jsx)("label",{htmlFor:"follow",children:"Follow disc"}),Object(d.jsx)("input",{ref:c,type:"button",value:"Full path"}),Object(d.jsx)("input",{ref:i,type:"button",value:"Thrower"}),Object(d.jsx)("input",{ref:l,type:"button",value:"Landing"})]}),Object(d.jsx)("div",{className:"scrubber",children:Object(d.jsx)("input",{ref:n,type:"range",min:"0",max:p-1,defaultValue:"0"})}),Object(d.jsxs)(M.a,{className:"main",resize:{scroll:!0,debounce:0},camera:{position:[0,0,-5]},children:[Object(d.jsx)(L,{ref:t,disc:s,follow:a,full:c,thrower:i,landing:l,centre:b,scrubber:n,points:o,eulers:u}),Object(d.jsx)("ambientLight",{color:2105376}),Object(d.jsx)("pointLight",{position:[0,20,25],intensity:.5,decay:2}),Object(d.jsx)(k,{ref:s,radius:.1,aspect:.1,position:o[0],rotation:u[0]}),Object(d.jsx)(F,{radius:.1,points:o,eulers:u}),Object(d.jsxs)("mesh",{position:[0,0,j/2-5],rotation:[-Math.PI/2,0,0],children:[Object(d.jsx)("planeGeometry",{args:[10,j]}),Object(d.jsx)("meshStandardMaterial",{color:"#00aa00"})]})]})]})}var R=function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,null,[{key:"groundDisc",value:function(e){var t=e.x,n=e.y,r=e.z,a=Math.cos(t),c=Math.cos(n),i=Math.cos(r),l=Math.sin(t),s=Math.sin(n),o=Math.sin(r);return(new f.Matrix3).set(c*i,l*s*i-a*o,a*s*i+l*l,c*o,l*s*o+a*i,a*s*o-l*i,-s,l*c,a*c)}},{key:"discGround",value:function(e){var t=e.x,n=e.y,r=e.z,a=Math.cos(t),c=Math.cos(n),i=Math.cos(r),l=Math.sin(t),s=Math.sin(n),o=Math.sin(r);return(new f.Matrix3).set(c*i,c*o,-s,l*s*i-a*o,l*s*o+a*i,l*c,a*s*i+l*o,a*s*o-l*i,a*c)}},{key:"discSlip",value:function(e){var t=Math.cos(e),n=Math.sin(e);return(new f.Matrix3).set(t,-n,0,n,t,0,0,0,1)}},{key:"slipDisc",value:function(e){var t=Math.cos(e),n=Math.sin(e);return(new f.Matrix3).set(t,n,0,-n,t,0,0,0,1)}},{key:"slipWind",value:function(e){var t=Math.cos(e),n=Math.sin(e);return(new f.Matrix3).set(t,0,-n,0,1,0,n,0,t)}},{key:"windSlip",value:function(e){var t=Math.cos(e),n=Math.sin(e);return(new f.Matrix3).set(t,0,n,0,1,0,-n,0,t)}}]),e}(),D=.01,I=1001;function P(e,t,n,r,a,c,i,l){var s=0,o=new Array(I),u=new Array(I),d=new Array(I),h=new Array(I),p=new Array(I),j=new Array(I),b=new Array(I),f=new Array(I),m=new Array(I),x=new Array(I),y=new Array(I),g=new Array(I),O=new Array(I),w=new Array(I),M=new Array(I),A=new Array(I),C=new Array(I),k=new Array(I),S=new Array(I);p[s]=v(t,n,0),d[s]=v(c*Math.cos(r),0,c*Math.sin(r));var F=v(0,r,0).applyMatrix3(R.groundDisc(p[s]));p[s].add(F),u[s]=v(0,0,a);for(var z=e.diam,E=e.jxy*l,L=e.jz*l,N=Math.PI*Math.pow(.5*z,2),P=9.81*l;u[s].z>0&&!(s>=1e3);){for(var _=0;;){f[s]=d[s].clone().applyMatrix3(R.groundDisc(p[s])),O[s]=-Math.atan2(f[s].y,f[s].x),y[s]=f[s].clone().applyMatrix3(R.discSlip(O[s])),A[s]=-Math.atan2(y[s].z,y[s].x),M[s]=y[s].clone().applyMatrix3(R.slipWind(A[s]));var B=v(0,0,-P).applyMatrix3(R.groundDisc(p[s])).clone().applyMatrix3(R.discSlip(O[s])).clone().applyMatrix3(R.slipWind(A[s]));if(C[s]=.59*Math.pow(M[s].x,2)*N*e.getCd(A[s]),k[s]=.59*Math.pow(M[s].x,2)*N*e.getCl(A[s]),S[s]=.59*Math.pow(M[s].x,2)*N*z*e.getCm(A[s]),w[s]=v(),g[s]=v(),w[s].x=(B.x-C[s])/l,w[s].z=(B.z+k[s])/l,w[s].y=B.y/l,g[s].x=-S[s]/(i*(E-L)),x[s]=w[s].clone().applyMatrix3(R.windSlip(A[s])),b[s]=x[s].clone().applyMatrix3(R.slipDisc(O[s])),h[s]=b[s].clone().applyMatrix3(R.discGround(p[s])),m[s]=g[s].clone().applyMatrix3(R.slipDisc(O[s])),j[s]=m[s].clone().applyMatrix3(R.discGround(p[s])),0===s)break;if(_>=1)break;var H=h[s-1].clone().add(h[s]).multiplyScalar(.5),G=j[s-1].clone().add(j[s]).multiplyScalar(.5);d[s]=d[s-1].clone().add(H.clone().multiplyScalar(D)),u[s]=u[s-1].clone().add(d[s-1].clone().multiplyScalar(D)).add(H.clone().multiplyScalar(.5*Math.pow(D,2))),p[s]=p[s-1].clone().add(G.clone().multiplyScalar(D)),_++}d[s+1]=d[s].clone().add(h[s].clone().multiplyScalar(D)),u[s+1]=u[s].clone().add(d[s].clone().multiplyScalar(D)).add(h[s].clone().multiplyScalar(.5*Math.pow(D,2))),p[s+1]=p[s].clone().add(j[s].clone().multiplyScalar(D)),o[s+1]=o[s]+D,s++}return{t:o.slice(0,s),lift:k.slice(0,s),drag:C.slice(0,s),mom:S.slice(0,s),alpha:A.slice(0,s),beta:O.slice(0,s),pos_g:u.slice(0,s),vel_g:d.slice(0,s),acl_g:h.slice(0,s),ori_g:p.slice(0,s),rot_g:j.slice(0,s),vel_d:f.slice(0,s),vel_w:M.slice(0,s),acl_w:w.slice(0,s),rot_s:g.slice(0,s)}}var _=[{id:0,disc:0,mass:175,speed:50,spin:27,direction:1,launchAngle:10,noseAngle:4,rollAngle:8},{id:1,disc:1,mass:170,speed:30,spin:20,direction:1,launchAngle:8,noseAngle:6,rollAngle:0}],B=function(e){var t=[e.rollAngle*Math.PI/180,e.noseAngle*Math.PI/180,e.launchAngle*Math.PI/180,1.8,.44704*e.speed,e.spin*e.direction*2*Math.PI,e.mass/1e3];return P.apply(void 0,[O[e.disc]].concat(t))};function H(){var e=Object(r.useState)(_),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(B(n[0])),i=Object(s.a)(c,2),o=i[0],u=i[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{result:o}),Object(d.jsx)("h1",{children:"Disc Flyte"}),Object(d.jsxs)("div",{className:"throw-container",children:[Object(d.jsx)("h2",{className:"throw-header",children:"Throws"}),Object(d.jsx)("div",{className:"throw-list",children:n.map((function(e,t){return Object(d.jsx)(w,{throw:e,onThrowChange:function(e){return function(e,t){var r=B(t);u(r);var c=Object(l.a)(n);c[e]=t,a(c)}(t,e)}},e.id)}))})]})]})}var G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(H,{})}),document.getElementById("root")),G()}},[[61,1,2]]]);
//# sourceMappingURL=main.af1560d4.chunk.js.map